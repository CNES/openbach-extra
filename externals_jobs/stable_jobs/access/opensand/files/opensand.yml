---

general:
  name:            opensand
  description: >
      This job configures and runs an OpenSAND entity.
      It can be a gateway ("gw"), a split gateway("gw-phy" and "gw-net-acc")
      a satellite terminal ("st") or satellite emulator ("sat").
  job_version:     '1.0'
  keywords:        [opensand, configuration, conf, run, network, gw, gateway, sat, satellite, st, terminal]
  persistent:      false

platform_configuration:
  - ansible_system: 'Linux'
    ansible_distribution: 'Ubuntu'
    ansible_distribution_version: '16.04'
    command: '/usr/bin/env python3 /opt/openbach/agent/jobs/opensand/opensand.py'
    command_stop:

# maybe 'ip' as ipv4 and ipv6 type

arguments:
  subcommands:
    - group_name: action
      optional: no
      choices:
        - name: network
          subcommands:
            - group_name: entity
              optional: no
              choices:
                - name: st
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: type
                      type: str
                      count: 1
                      choices:
                        - IP_TYPE
                        - ETH_TYPE
                      flag: '-t'
                      description: The type of terrestrial network
                    - name: network interface
                      type: str
                      count: 1
                      flag: '-n'
                      description: The terrestrial network interface
                    - name: network address
                      type: ip
                      count: 1
                      flag: '--net-addr'
                      description: The terrestrial network address
                    - name: emulation interface
                      type: str
                      count: 1
                      flag: '-e'
                      description: The emulation interface
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: internal address
                      type: ip
                      count: 1
                      flag: '--int-addr'
                      description: The internal address (format "ADDRESS/NET_DIGIT")
                    - name: revert
                      type: None
                      count: 0
                      flag: '-r'
                      description: Revert the current network configuration
                - name: gw
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: type
                      type: str
                      count: 1
                      choices:
                        - IP_TYPE
                        - ETH_TYPE
                      flag: '-t'
                      description: The type of terrestrial network
                    - name: network interface
                      type: str
                      count: 1
                      flag: '-n'
                      description: The terrestrial network interface
                    - name: network address
                      type: ip
                      count: 1
                      flag: '--net-addr'
                      description: The terrestrial network address
                    - name: emulation interface
                      type: str
                      count: 1
                      flag: '-e'
                      description: The emulation interface
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: internal address
                      type: ip
                      count: 1
                      flag: '--int-addr'
                      description: The internal address (format "ADDRESS/NET_DIGIT")
                    - name: revert
                      type: None
                      count: 0
                      flag: '-r'
                      description: Revert the current network configuration
                - name: sat
                  optional:
                    - name: emulation interface
                      type: str
                      count: 1
                      flag: '-e'
                      description: The emulation interface
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: revert
                      type: None
                      count: 0
                      flag: '-r'
                      description: Revert the current network configuration
                - name: gw_net_acc
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: type
                      type: str
                      count: 1
                      choices:
                        - IP_TYPE
                        - ETH_TYPE
                      flag: '-t'
                      description: The type of terrestrial network
                    - name: network interface
                      type: str
                      count: 1
                      flag: '-n'
                      description: The terrestrial network interface
                    - name: network address
                      type: ip
                      count: 1
                      flag: '--net-addr'
                      description: The terrestrial network address
                    - name: interconnection interface
                      type: str
                      count: 1
                      flag: '-o'
                      description: The interconnection interface
                    - name: interconnection address
                      type: ip
                      count: 1
                      flag: '--interco-addr'
                      description: The interconnection address (format: "ADDRESS/NET_DIGIT")
                    - name: internal address
                      type: ip
                      count: 1
                      flag: '--int-addr'
                      description: The internal address (format "ADDRESS/NET_DIGIT")
                    - name: revert
                      type: None
                      count: 0
                      flag: '-r'
                      description: Revert the current network configuration
                - name: gw_phy
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: interconnection interface
                      type: str
                      count: 1
                      flag: '-o'
                      description: The interconnection interface
                    - name: interconnection address
                      type: ip
                      count: 1
                      flag: '--interco-addr'
                      description: The interconnection address (format: "ADDRESS/NET_DIGIT")
                    - name: revert
                      type: None
                      count: 0
                      flag: '-r'
                      description: Revert the current network configuration
        - name: run
          subcommands:
            - group_name: entity
              optional: no
              choices:
                - name: st
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: configuration
                      type: str
                      count: 1
                      flag: '-c'
                      description: The directory of the OpenSAND entity configuration
                    - name: output
                      type: ip
                      count: 1
                      flag: '--output-addr'
                      description: The output address
                    - name: logs port
                      type: int
                      count: 1
                      flag: '--logs-port'
                      description: UDP port to send logs to
                    - name: stats port
                      type: int
                      count: 1
                      flag: '--stats-port'
                      description: UDP port to send stats to
                    - name: binaries
                      type: str
                      count: 1
                      flag: '--bin-dir'
                      description: The directory containing entities binaries for OpenSAND
                - name: gw
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: configuration
                      type: str
                      count: 1
                      flag: '-c'
                      description: The directory of the OpenSAND entity configuration
                    - name: output
                      type: ip
                      count: 1
                      flag: '--output-addr'
                      description: The output address
                    - name: logs port
                      type: int
                      count: 1
                      flag: '--logs-port'
                      description: UDP port to send logs to
                    - name: stats port
                      type: int
                      count: 1
                      flag: '--stats-port'
                      description: UDP port to send stats to
                    - name: binaries
                      type: str
                      count: 1
                      flag: '--bin-dir'
                      description: The directory containing entities binaries for OpenSAND
                - name: sat
                  optional:
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: configuration
                      type: str
                      count: 1
                      flag: '-c'
                      description: The directory of the OpenSAND entity configuration
                    - name: output
                      type: ip
                      count: 1
                      flag: '--output-addr'
                      description: The output address
                    - name: logs port
                      type: int
                      count: 1
                      flag: '--logs-port'
                      description: UDP port to send logs to
                    - name: stats port
                      type: int
                      count: 1
                      flag: '--stats-port'
                      description: UDP port to send stats to
                    - name: binaries
                      type: str
                      count: 1
                      flag: '--bin-dir'
                      description: The directory containing entities binaries for OpenSAND
                - name: gw_net_acc
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: interconnection address
                      type: ip
                      count: 1
                      flag: '--interco-addr'
                      description: The remote interconnection address
                    - name: configuration
                      type: str
                      count: 1
                      flag: '-c'
                      description: The directory of the OpenSAND entity configuration
                    - name: output
                      type: ip
                      count: 1
                      flag: '--output-addr'
                      description: The output address
                    - name: logs port
                      type: int
                      count: 1
                      flag: '--logs-port'
                      description: UDP port to send logs to
                    - name: stats port
                      type: int
                      count: 1
                      flag: '--stats-port'
                      description: UDP port to send stats to
                    - name: binaries
                      type: str
                      count: 1
                      flag: '--bin-dir'
                      description: The directory containing entities binaries for OpenSAND
                - name: gw_phy
                  optional:
                    - name: id
                      type: int
                      count: 1
                      flag: '-i'
                      description: The OpenSAND entity identifier
                    - name: emulation address
                      type: ip
                      count: 1
                      flag: '-a'
                      description: The emulation address (format "ADDRESS/NET_DIGIT")
                    - name: interconnection address
                      type: ip
                      count: 1
                      flag: '--interco-addr'
                      description: The remote interconnection address
                    - name: configuration
                      type: str
                      count: 1
                      flag: '-c'
                      description: The directory of the OpenSAND entity configuration
                    - name: output
                      type: ip
                      count: 1
                      flag: '--output-addr'
                      description: The output address
                    - name: logs port
                      type: int
                      count: 1
                      flag: '--logs-port'
                      description: UDP port to send logs to
                    - name: stats port
                      type: int
                      count: 1
                      flag: '--stats-port'
                      description: UDP port to send stats to
                    - name: binaries
                      type: str
                      count: 1
                      flag: '--bin-dir'
                      description: The directory containing entities binaries for OpenSAND

statistics:

