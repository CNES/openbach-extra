---

general:
  name: tcp_conf_linux
  description: This Job configures TCP options Ubuntu kernel
  job_version: '1.0'
  keywords: [tcp, conf, sysct]
  persistent: False

platform_configuration:
  - ansible_system: 'Linux'
    ansible_distribution: 'Ubuntu'
    ansible_distribution_version: '16.04'
    command: 'python3 /opt/openbach/agent/jobs/tcp_conf_linux/tcp_conf_linux.py'
    command_stop:

arguments:
  subcommand:
    - group_name: congestion control
      optional: no
      choices:
        - name: CUBIC
          required:
          optional:
            - name: beta
              type: int
              count: 1
              flag: '--beta'
              description: The beta field of CUBIC
            - name: fast_convergence
              type: int
              count: 1
              flag: '--fast_convergence'
              description: The fast_convergence field of CUBIC
            - name: hystart_ack_delta
              type: int
              count: 1
              flag: '--hystart_ack_delta'
              description: The hystart_ack_delta field of CUBIC
            - name: hystart_low_window
              type: int
              count: 1
              flag: '--hystart_low_window'
              description: The hystart_low_window field of CUBIC
            - name: tcp_friendliness
              type: int
              count: 1
              flag: '--tcp_friendliness'
              description: The tcp_friendliness field of CUBIC
            - name: hystart
              type: int
              count: 1
              flag: '--hystart'
              description: The hystart field of CUBIC
            - name: hystart_detect
              type: int
              count: 1
              flag: '--hystart_detect'
              description: The hystart_detect field of CUBIC
            - name: initial_ssthresh
              type: int
              count: 1
              flag: '--initial_ssthresh'
              description: The initial_ssthresh field of CUBIC
        - name: other
          required:
            - name: congestion_control_name
              type: str
              count: 1
              flag: '--tcp_congestion_control_name'
              description: The congestion control chosen
          optional:
  optional:
    - name: reset
      type: None
      count: 0
      flag: '--reset'
      description: Resets the parameters to default configuration before applying changes
    - name: tcp_slow_start_after_idle
      type: 'int'
      count: 1
      flag: '--tcp_slow_start_after_idle'
      description: The tcp_slow_start_after_idle field
    - name: tcp_no_metrics_save
      type: 'int'
      count: 1
      flag: '--tcp_no_metrics_save'
      description: The tcp_no_metrics_save field
    - name: tcp_sack
      type: 'int'
      count: 1
      flag: '--tcp_sack'
      description: The tcp_sack field
    - name: tcp_recovery
      type: 'int'
      count: 1
      flag: '--tcp_recovery'
      description: The tcp_recovery field
    - name: tcp_wmem_min
      type: 'int'
      count: 1
      flag: '--tcp_wmem_min'
      description: The tcp_wmem_min field
    - name: tcp_wmem_default
      type: 'int'
      count: 1
      flag: '--tcp_wmem_default'
      description: The tcp_wmem_default field
    - name: tcp_wmem_max
      type: 'int'
      count: 1
      flag: '--tcp_wmem_max'
      description: The tcp_wmem_max field
    - name: tcp_fastopen
      type: 'int'
      count: 1
      flag: '--tcp_fastopen'
      description: The tcp_fastopen field
    - name: tcp_low_latency
      type: 'int'
      count: 1
      flag: '--tcp_low_latency'
      description: The tcp_low_latency field

statistics:
  - name: "tcp_congestion_control_param"
    description: The value of tcp_congestion_control after launching the job
    frequency: 'once'
  - name: "tcp_slow_start_after_idle_param"
    description: The value of tcp_slow_start_after_idle after launching the job
    frequency: 'once'
  - name: "tcp_no_metrics_save_param"
    description: The value of tcp_no_metrics_save after launching the job
    frequency: 'once'
  - name: "tcp_sack_param"
    description: The value of tcp_sack after launching the job
    frequency: 'once'
  - name: "tcp_recovery_param"
    description: The value of tcp_recovery after launching the job
    frequency: 'once'
  - name: "tcp_wmem_min_param"
    description: The value of tcp_wmem_min after launching the job
    frequency: 'once'
  - name: "tcp_wmem_default_param"
    description: The value of tcp_wmem_default after launching the job
    frequency: 'once'
  - name: "tcp_wmem_max_param"
    description: The value of tcp_wmem_max after launching the job
    frequency: 'once'
  - name: "tcp_fastopen_param"
    description: The value of tcp_fastopen after launching the job
    frequency: 'once'
  - name: "tcp_low_latency_param"
    description: The value of tcp_low_latency after launching the job
    frequency: 'once'
  - name: "beta_param"
    description: The value of tcp_cubic beta after launching the job
    frequency: 'once'
  - name: "fast_convergence_param"
    description: The value of tcp_cubic fast_convergence after launching the job
    frequency: 'once'
  - name: "hystart_ack_delta_param"
    description: The value of tcp_cubic hystart_ack_delta after launching the job
    frequency: 'once'
  - name: "hystart_low_window_param"
    description: The value of tcp_cubic hystart_low_window after launching the job
    frequency: 'once'
  - name: "tcp_friendliness_param"
    description: The value of tcp_cubic tcp_friendliness after launching the job
    frequency: 'once'
  - name: "hystart_param"
    description: The value of tcp_cubic hystart after launching the job
    frequency: 'once'
  - name: "hystart_detect_param"
    description: The value of tcp_cubic hystart_detect after launching the job
    frequency: 'once'
  - name: "initial_ssthresh_param"
    description: The value of tcp_cubic initial_ssthresh after launching the job
    frequency: 'once'